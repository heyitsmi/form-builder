<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Form Builder Library Demo</title>
        <link rel="stylesheet" href="form-builder.css">
        <style>
            body { margin: 0; font-family: 'Inter', sans-serif; background: #f3f4f6; color: #1f2937; }
            .navbar { background: white; padding: 1rem 2rem; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 50; }
            .btn { background: #1f2937; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; cursor: pointer; font-weight: 500; transition: background 0.2s; }
            .btn:hover { background: black; }
            .logo { font-weight: 700; font-size: 1.1rem; display: flex; align-items: center; gap: 0.5rem; }
            #app { 
                margin: 2rem auto; 
                max-width: 1200px; 
                padding: 0 1rem; 
                min-height: calc(100vh - 100px); 
            }
            #jsonModal { 
                padding: 1.5rem; 
                border-radius: 0.75rem; 
                border: 1px solid #e5e7eb;
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                max-width: 42rem;
            }
            #jsonModal::backdrop {
                background: rgba(0, 0, 0, 0.5);
            }
            .modal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }
            .modal-close {
                background: transparent;
                border: none;
                cursor: pointer;
                padding: 0.25rem;
                color: #6b7280;
                transition: color 0.2s;
            }
            .modal-close:hover {
                color: #1f2937;
            }
            #jsonOutput {
                background: #1f2937;
                color: #10b981;
                padding: 1rem;
                border-radius: 0.5rem;
                overflow: auto;
                max-height: 400px;
                font-size: 0.875rem;
                font-family: 'Courier New', monospace;
                white-space: pre;
            }
            @media (max-width: 768px) {
                .navbar { padding: 1rem; }
                #app { margin: 1rem auto; padding: 0 0.5rem; }
                #jsonModal { max-width: 90%; }
            }
        </style>
    </head>
    <body>
        <nav class="navbar">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="3" y1="9" x2="21" y2="9"></line>
                    <line x1="9" y1="21" x2="9" y2="9"></line>
                </svg>
                My Form App
            </div>
            <div style="display: flex; gap: 0.75rem;">
                <button class="btn" id="viewJsonBtn" style="background: white; color: #1f2937; border: 1px solid #e5e7eb;">View JSON</button>
                <button class="btn" id="saveBtn">Save Form</button>
            </div>
        </nav>
        <div id="app"></div>
        
        <!-- Modal JSON -->
        <dialog id="jsonModal">
            <div class="modal-header">
                <h3 style="font-size: 1.125rem; font-weight: 700; margin: 0;">Generated Schema (JSON)</h3>
                <button class="modal-close" onclick="document.getElementById('jsonModal').close()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <pre id="jsonOutput"></pre>
        </dialog>
        
        <script src="form-builder.js"></script>
        <script>
            const builder = new FormBuilder('#app', {
                layout: 'right',
                components: [
                    'text',
                    'number',
                    { type: 'select', label: 'Dropdown List' },
                    'checkbox',
                    'date',
                    { 
                        type: 'file', 
                        label: 'Attachment', 
                        iconHtml: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>'
                    }
                ]
            });
            
            // Handle View JSON
            document.getElementById('viewJsonBtn').addEventListener('click', () => {
                const schema = builder.getJson();
                document.getElementById('jsonOutput').textContent = JSON.stringify(schema, null, 2);
                document.getElementById('jsonModal').showModal();
            });
            
            // Handle Save
            document.getElementById('saveBtn').addEventListener('click', () => {
                const schema = builder.getJson();
                console.log("Form Saved:", schema);
                alert("Check console for JSON output!");
            });
        </script>
    </body>
</html>